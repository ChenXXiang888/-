<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>短信验证码+极验验证码 | 短信验证码+极验验证码</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    
    <link rel="prev" href="../index.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="1"
        data-chapter-title="短信验证码+极验验证码"
        data-filepath="02day/section.md"
        data-basepath=".."
        data-revision="Sun May 13 2018 20:13:38 GMT+0800 (中国标准时间)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="1" data-path="02day/section.html">
            
                
                    <a href="../02day/section.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        短信验证码+极验验证码
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >短信验证码+极验验证码</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="&#x624B;&#x673A;&#x77ED;&#x4FE1;&#x9A8C;&#x8BC1;&#x7801;">&#x624B;&#x673A;&#x77ED;&#x4FE1;&#x9A8C;&#x8BC1;&#x7801;</h1>
<ul>
<li>&#x6253;&#x5F00;&#x7F51;&#x7AD9;<a href="http://user.ihuyi.com/login.html" target="_blank">&#x4E92;&#x4EBF;&#x65E0;&#x7EBF;</a>&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x8D26;&#x53F7;&#xFF0C;&#x6709;50&#x6761;&#x514D;&#x8D39;&#x77ED;&#x4FE1;</li>
<li><img src="https://img-blog.csdn.net/20180427212411877?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></li>
<li><p>&#x767B;&#x5F55;&#x8FDB;&#x53BB;&#x540E;&#x4F1A;&#x6709;&#x4EE5;&#x4E0B;&#x9875;&#x9762;
<img src="https://img-blog.csdn.net/20180427212453261?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
</li>
<li><p>&#x4F7F;&#x7528;&#x56FE;&#x4E2D;&#x7684;APIID&#x548C;APIKEY&#x5F00;&#x542F;&#x4F60;&#x7684;&#x514D;&#x8D39;&#x624B;&#x673A;&#x77ED;&#x4FE1;&#x65C5;&#x7A0B;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x63A5;&#x53E3;&#x4E0B;&#x8F7D;&#x3001;&#x63A5;&#x53E3;&#x5E2E;&#x52A9;&#x5B9E;&#x73B0;Django&#x624B;&#x673A;&#x77ED;&#x4FE1;&#x9A8C;&#x8BC1;</p>
</li>
<li><img src="https://img-blog.csdn.net/20180427212652343?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"><h1 id="&#x77ED;&#x4FE1;&#x6559;&#x7A0B;">&#x77ED;&#x4FE1;&#x6559;&#x7A0B;</h1>
</li>
</ul>
<p>1.&#x6CE8;&#x518C;&#x9875;&#x9762;&#x52A0;&#x5165;&#x4E24;&#x4E2A;&#x6587;&#x672C;&#x6846;</p>
<pre><code>&lt;li&gt;
&lt;label for=&quot;&quot;&gt;&#x624B;&#x673A;&#x53F7;&#x7801;:&lt;/label&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;11&#x4F4D;&#x6570;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&quot; id=&quot;mobile&quot; name=&quot;mobile&quot;/&gt;
        &lt;span class=&quot;error_tip&quot;&gt;&#x63D0;&#x793A;&#x4FE1;&#x606F;&lt;/span&gt;
&lt;/li&gt;
&lt;li&gt;
        &lt;label for=&quot;&quot;&gt;&#x9A8C;&#x8BC1;&#x7801;:&lt;/label&gt;
        &lt;input type=&quot;text&quot; name=&quot;code&quot; placeholder=&quot;&#x8BF7;&#x8F93;&#x5165;&#x624B;&#x673A;&#x9A8C;&#x8BC1;&#x7801;&quot; style=&quot;width: 140px;&quot;&gt;
        &amp;nbsp;&amp;nbsp;
        &lt;input type=&quot;button&quot; value=&quot; &#x83B7;&#x53D6;&#x9A8C;&#x8BC1;&#x7801;&quot; id=&quot;zphone&quot; style=&quot;width: 100px;margin-left: 10px&quot;&gt;
&lt;/li&gt;
</code></pre><p>&#x5728;models.py&#x4E2D;&#x5B9A;&#x4E49;&#x624B;&#x673A;&#x53F7;&#x7801;&#x5B57;&#x6BB5;&#xFF1A;</p>
<pre><code>     # &#x4E0D;&#x8981;&#x5B9A;&#x4E49;int&#x578B;,&#x5426;&#x5219;&#x5B58;&#x4E0D;&#x8FDB;&#x6570;&#x636E;&#x5E93;,&#x4F1A;&#x62A5;&#x9519;,Out of range
     # &#x5EFA;&#x8BAE;&#x4F7F;&#x7528;char&#x7C7B;&#x578B;
     uphone = models.CharField(max_length=11)
</code></pre><p>2.&#x4F7F;&#x7528;js+ajax&#x8BF7;&#x6C42;&#x77ED;&#x4FE1;&#x53D1;&#x9001;&#x548C;&#x6309;&#x94AE;&#x8BA1;&#x65F6;&#x89E6;&#x53D1;</p>
<pre><code> $(&apos;#zphone&apos;).click(
     function(){
     //&#x53D1;&#x9001;&#x9A8C;&#x8BC1;&#x7801;
     $.get(&apos;/user/send_message&apos;, {mobile:$(&apos;#mobile&apos;).val()}, function(msg) {
         alert(jQuery.trim(msg.msg));
         if(msg.msg==&apos;&#x63D0;&#x4EA4;&#x6210;&#x529F;&apos;){
             RemainTime();
         }
     });
 })

 //&#x6309;&#x94AE;&#x5012;&#x8BA1;&#x65F6;
 var iTime = 60;
 sTime = &apos;&apos;
 function RemainTime(){
     if (iTime == 0) {
         document.getElementById(&apos;zphone&apos;).disabled = false;
         sTime=&quot;&#x83B7;&#x53D6;&#x9A8C;&#x8BC1;&#x7801;&quot;;
         iTime = 60;
         document.getElementById(&apos;zphone&apos;).value = sTime;
         return;
     }else{
         document.getElementById(&apos;zphone&apos;).disabled = true;
         sTime=&quot;&#x91CD;&#x65B0;&#x53D1;&#x9001;(&quot; + iTime + &quot;)&quot;;
         iTime--;
     }
     setTimeout(function() { RemainTime() },1000)
     document.getElementById(&apos;zphone&apos;).value = sTime;
 }

 // &#x68C0;&#x67E5;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x624B;&#x673A;&#x53F7;&#x662F;&#x5426;&#x5408;&#x6CD5;
 function check_mobile() {

     var re = /^1[345678]\d{9}$/; //&#x6821;&#x9A8C;&#x624B;&#x673A;&#x53F7;

     if(re.test($(&apos;#mobile&apos;).val()))
     {
         $(&apos;#mobile&apos;).next().hide();
         error_mobile = false;
         document.getElementById(&apos;zphone&apos;).disabled = false;
     }
     else
     {
         $(&apos;#mobile&apos;).next().html(&apos;&#x4F60;&#x8F93;&#x5165;&#x7684;&#x624B;&#x673A;&#x683C;&#x5F0F;&#x4E0D;&#x6B63;&#x786E;&apos;)
         $(&apos;#mobile&apos;).next().show();
         error_mobile = true;
         document.getElementById(&apos;zphone&apos;).disabled = true;
     }
 }
</code></pre><p>3.&#x914D;&#x7F6E;url</p>
<pre><code>     url(r&apos;^send_message$&apos;, views.send_message, name=&apos;send_message&apos;),
</code></pre><p>4.&#x5B9A;&#x4E49;&#x53D1;&#x9001;&#x77ED;&#x4FE1;&#x7684;&#x89C6;&#x56FE;&#x51FD;&#x6570;</p>
<pre><code># &#x8BF7;&#x6C42;&#x7684;&#x8DEF;&#x5F84;
host = &quot;106.ihuyi.com&quot;
sms_send_uri = &quot;/webservice/sms.php?method=Submit&quot;
# &#x7528;&#x6237;&#x540D;&#x662F;&#x767B;&#x5F55;ihuyi.com&#x8D26;&#x53F7;&#x540D;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;cf_demo123&#xFF09;
account = &quot;C44****38&quot;
# &#x5BC6;&#x7801; &#x67E5;&#x770B;&#x5BC6;&#x7801;&#x8BF7;&#x767B;&#x5F55;&#x7528;&#x6237;&#x4E2D;&#x5FC3;-&gt;&#x9A8C;&#x8BC1;&#x7801;&#x3001;&#x901A;&#x77E5;&#x77ED;&#x4FE1;-&gt;&#x5E10;&#x6237;&#x53CA;&#x7B7E;&#x540D;&#x8BBE;&#x7F6E;-&gt;APIKEY
password = &quot;ddd**************30 &quot;

def send_message(request):
     &quot;&quot;&quot;&#x53D1;&#x9001;&#x4FE1;&#x606F;&#x7684;&#x89C6;&#x56FE;&#x51FD;&#x6570;&quot;&quot;&quot;
     # &#x83B7;&#x53D6;ajax&#x7684;get&#x65B9;&#x6CD5;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;
     mobile = request.GET.get(&apos;mobile&apos;)
     # &#x901A;&#x8FC7;&#x624B;&#x673A;&#x53BB;&#x67E5;&#x627E;&#x7528;&#x6237;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6CE8;&#x518C;
     user = User.objects.filter(uphone=mobile)
     if len(user) == 1:
             return JsonResponse({&apos;msg&apos;: &quot;&#x8BE5;&#x624B;&#x673A;&#x5DF2;&#x7ECF;&#x6CE8;&#x518C;&quot;})
     # &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;,&#x5B58;&#x50A8;&#x751F;&#x6210;&#x7684;6&#x4F4D;&#x6570;&#x9A8C;&#x8BC1;&#x7801;
     message_code = &apos;&apos;
     for i in range(6):
             i = random.randint(0, 9)
             message_code += str(i)
     # &#x62FC;&#x63A5;&#x6210;&#x53D1;&#x51FA;&#x7684;&#x77ED;&#x4FE1;
     text = &quot;&#x60A8;&#x7684;&#x9A8C;&#x8BC1;&#x7801;&#x662F;&#xFF1A;&quot; + message_code + &quot;&#x3002;&#x8BF7;&#x4E0D;&#x8981;&#x628A;&#x9A8C;&#x8BC1;&#x7801;&#x6CC4;&#x9732;&#x7ED9;&#x5176;&#x4ED6;&#x4EBA;&#x3002;&quot;
     # &#x628A;&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x7F16;&#x7801;
     params = urllib.parse.urlencode(
             {&apos;account&apos;: account, &apos;password&apos;: password, &apos;content&apos;: text, &apos;mobile&apos;: mobile, &apos;format&apos;: &apos;json&apos;})
     # &#x8BF7;&#x6C42;&#x5934;
     headers = {&quot;Content-type&quot;: &quot;application/x-www-form-urlencoded&quot;, &quot;Accept&quot;: &quot;text/plain&quot;}
     # &#x901A;&#x8FC7;&#x5168;&#x5C40;&#x7684;host&#x53BB;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;
     conn = http.client.HTTPConnection(host, port=80, timeout=30)
     # &#x5411;&#x8FDE;&#x63A5;&#x540E;&#x7684;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;post&#x8BF7;&#x6C42;,&#x8DEF;&#x5F84;sms_send_uri&#x662F;&#x5168;&#x5C40;&#x53D8;&#x91CF;,&#x53C2;&#x6570;,&#x8BF7;&#x6C42;&#x5934;
     conn.request(&quot;POST&quot;, sms_send_uri, params, headers)
     # &#x5F97;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7684;&#x54CD;&#x5E94;
     response = conn.getresponse()
     # &#x83B7;&#x53D6;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;
     response_str = response.read()
     # &#x5173;&#x95ED;&#x8FDE;&#x63A5;
     conn.close()
     # &#x628A;&#x9A8C;&#x8BC1;&#x7801;&#x653E;&#x8FDB;session&#x4E2D;
     request.session[&apos;message_code&apos;] = message_code
     print(eval(response_str.decode()))
     # &#x4F7F;&#x7528;eval&#x628A;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x4E3A;json&#x6570;&#x636E;&#x8FD4;&#x56DE;
     return JsonResponse(eval(response_str.decode()))
</code></pre><h1 id="&#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x7801;">&#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x7801;</h1>
<p>1.&#x5148;&#x5230;<a href="http://www.geetest.com/index" target="_blank">&#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x7F51;&#x7AD9;</a>&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x8D26;&#x53F7;&#xFF0C;&#x767B;&#x5F55;&#x4E0A;&#x53BB;
<img src="https://img-blog.csdn.net/20180427213855635?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>2.&#x521B;&#x5EFA;&#x5E94;&#x7528;
<img src="https://img-blog.csdn.net/20180427214152296?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
<img src="https://img-blog.csdn.net/20180427214206936?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>3.&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x7684;id&#x548C;key
<img src="https://img-blog.csdn.net/20180427214238316?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>4.&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5B89;&#x88C5;&#x6307;&#x5F15;&#x81EA;&#x884C;&#x5B66;&#x4E60;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6309;&#x4E0B;&#x9762;&#x6B65;&#x9AA4;&#x6765;
<img src="https://img-blog.csdn.net/20180427214345842?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h1 id="&#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x7801;">&#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x7801;</h1>
<p>&#x5728;form&#x8868;&#x5355;&#x6DFB;&#x52A0;&#x4EE3;&#x7801;
&#x63D0;&#x4EA4;&#x6309;&#x94AE;id&#x5FC5;&#x987B;&#x4E3A;&#xFF1A;id=&quot;embed-submit&quot;
&#x540E;&#x9762;&#x4F7F;&#x7528;ajax&#x65F6;&#x4F7F;&#x7528;</p>
<p>css&#x4EE3;&#x7801;&#x5757;&#xFF1A;</p>
<pre><code>/* &#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x7684;&#x6837;&#x5F0F; */
#embed-captcha {
    width: 300px;
    margin: 0 auto;

}
.show {
    display: block;
}
.hide {
    display: none;
}
#notice {
    color: red;
}
</code></pre><pre><code>{# &#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x7684;html&#x4EE3;&#x7801; #}
&lt;div id=&quot;embed-captcha&quot;&gt;&lt;/div&gt;
&lt;p id=&quot;wait&quot; class=&quot;show&quot;&gt;&#x6B63;&#x5728;&#x52A0;&#x8F7D;&#x9A8C;&#x8BC1;&#x7801;......&lt;/p&gt;
&lt;p id=&quot;notice&quot; class=&quot;hide&quot;&gt;&#x8BF7;&#x5148;&#x62D6;&#x52A8;&#x9A8C;&#x8BC1;&#x7801;&#x5230;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&lt;/p&gt;
&lt;input type=&quot;submit&quot; name=&quot;&quot; value=&quot;&#x767B;&#x5F55;&quot; class=&quot;input_submit&quot; id=&quot;embed-submit&quot;&gt;
</code></pre><p>js&#x4EE3;&#x7801;&#x5757;</p>
<pre><code>&lt;script&gt;
    var handlerEmbed = function (captchaObj) {
        $(&quot;#embed-submit&quot;).click(function (e) {
            var validate = captchaObj.getValidate();
            if (!validate) {
                $(&quot;#notice&quot;)[0].className = &quot;show&quot;;
                setTimeout(function () {
                    $(&quot;#notice&quot;)[0].className = &quot;hide&quot;;
                }, 1000);
                e.preventDefault();
            }
        });
        // &#x5C06;&#x9A8C;&#x8BC1;&#x7801;&#x52A0;&#x5230;id&#x4E3A;captcha&#x7684;&#x5143;&#x7D20;&#x91CC;&#xFF0C;&#x540C;&#x65F6;&#x4F1A;&#x6709;&#x4E09;&#x4E2A;input&#x7684;&#x503C;&#xFF1A;geetest_challenge, geetest_validate, geetest_seccode
        captchaObj.appendTo(&quot;#embed-captcha&quot;);
        captchaObj.onReady(function () {
            $(&quot;#wait&quot;)[0].className = &quot;hide&quot;;
        });
        // &#x66F4;&#x591A;&#x63A5;&#x53E3;&#x53C2;&#xFF1A;http://www.geetest.com/install/sections/idx-client-sdk.html
    };
    $.ajax({
        // &#x83B7;&#x53D6;id&#xFF0C;challenge&#xFF0C;success&#xFF08;&#x662F;&#x5426;&#x542F;&#x7528;failback&#xFF09;
        url: &quot;/user/pc-geetest/register?t=&quot; + (new Date()).getTime(), // &#x52A0;&#x968F;&#x673A;&#x6570;&#x9632;&#x6B62;&#x7F13;&#x5B58;
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        success: function (data) {
            // &#x4F7F;&#x7528;initGeetest&#x63A5;&#x53E3;
            // &#x53C2;&#x6570;1&#xFF1A;&#x914D;&#x7F6E;&#x53C2;&#x6570;
            // &#x53C2;&#x6570;2&#xFF1A;&#x56DE;&#x8C03;&#xFF0C;&#x56DE;&#x8C03;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x9A8C;&#x8BC1;&#x7801;&#x5BF9;&#x8C61;&#xFF0C;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x505A;appendTo&#x4E4B;&#x7C7B;&#x7684;&#x4E8B;&#x4EF6;
            initGeetest({
                gt: data.gt,
                challenge: data.challenge,
                product: &quot;embed&quot;, // &#x4EA7;&#x54C1;&#x5F62;&#x5F0F;&#xFF0C;&#x5305;&#x62EC;&#xFF1A;float&#xFF0C;embed&#xFF0C;popup&#x3002;&#x6CE8;&#x610F;&#x53EA;&#x5BF9;PC&#x7248;&#x9A8C;&#x8BC1;&#x7801;&#x6709;&#x6548;
                offline: !data.success // &#x8868;&#x793A;&#x7528;&#x6237;&#x540E;&#x53F0;&#x68C0;&#x6D4B;&#x6781;&#x9A8C;&#x670D;&#x52A1;&#x5668;&#x662F;&#x5426;&#x5B95;&#x673A;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x6CE8;
                // &#x66F4;&#x591A;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#x8BF7;&#x53C2;&#x89C1;&#xFF1A;http://www.geetest.com/install/sections/idx-client-sdk.html#config
            }, handlerEmbed);
        }
    });
&lt;/script&gt;
</code></pre><p>url&#x914D;&#x7F6E;&#xFF1A;</p>
<pre><code>    # &#x6781;&#x9A8C;&#x9A8C;&#x8BC1;
    url(r&apos;^pc-geetest/register&apos;, views.pcgetcaptcha, name=&apos;pcgetcaptcha&apos;),
</code></pre><p>&#x89C6;&#x56FE;views.py:</p>
<pre><code># &#x6781;&#x9A8C;&#x9A8C;&#x8BC1;,&#x8BF7;&#x5728;&#x5B98;&#x7F51;&#x7533;&#x8BF7;ID&#x4F7F;&#x7528;&#xFF0C;&#x793A;&#x4F8B;ID&#x4E0D;&#x53EF;&#x4F7F;&#x7528;
pc_geetest_id = &quot;910*****************************01&quot;  # id
pc_geetest_key = &quot;73d****************************03&quot;  # key

def pcgetcaptcha(request):
    &quot;&quot;&quot;&#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x51FD;&#x6570;&quot;&quot;&quot;
    user_id = &apos;test&apos;
    gt = GeetestLib(pc_geetest_id, pc_geetest_key)
    status = gt.pre_process(user_id)
    request.session[gt.GT_STATUS_SESSION_KEY] = status
    request.session[&quot;user_id&quot;] = user_id
    response_str = gt.get_response_str()
    return HttpResponse(response_str)
</code></pre><p>&#x6210;&#x529F;&#x540E;&#x4F1A;&#x51FA;&#x73B0;&#x6781;&#x9A8C;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x663E;&#x793A;&#x6B63;&#x5728;&#x52A0;&#x8F7D;&#x65F6;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x4E00;&#x4E0B;&#xFF0C;&#x8BF7;&#x6C42;&#x522B;&#x4EBA;&#x7684;&#x7F51;&#x7EDC;&#x8FD8;&#x6CA1;&#x751F;&#x6210;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x8FD9;&#x4E2A;&#x9A8C;&#x8BC1;&#x7801;&#x5DF2;&#x7ECF;&#x81EA;&#x5E26;&#x6821;&#x9A8C;&#x662F;&#x5426;&#x8F93;&#x5165;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x9A8C;&#x8BC1;&#x7801;&#x662F;&#x5426;&#x6B63;&#x786E;&#xFF1A;
<img src="https://img-blog.csdn.net/20180427215032586?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoZW5odWExMTI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="&#x8FD9;&#x91CC;&#x5199;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Introduction"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
